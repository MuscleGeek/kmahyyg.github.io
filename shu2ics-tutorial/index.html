<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>爬取课表并转换为 ICS 文件 &middot; Pat~ Pat~ Meow~</title>
  <meta name="description" content="充满广告的课程表应用令人心烦，本文是 shu2ics 和 ynu2gcalendar 的使用文档" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://www.kmahyyg.xyz/css/main.min.css" />
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-123948588-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

  <style>
    body {
      background: #ecedef url("https://alicdn.kmahyyg.xyz/asset_files/aether/bgimg.webp") repeat;
    }
  </style>
</head>
  <body class="single-body">
    <nav class="nav-bar side-padding">
  <h1 class="nav-header"><a href="https://www.kmahyyg.xyz/" class="nav-text">Patrick Young</a></h1>
  <div class="hamburger-menu">
    <button onclick="hamburgerMenuPressed.call(this)" aria-haspopup="true" aria-expanded="false" aria-controls="menu" aria-label="Menu">
      <span></span>
      <span></span>
    </button>
    <ul id="menu" class="hamburger-menu-overlay">
      <li><a href="https://www.kmahyyg.xyz/" class="hamburger-menu-overlay-link">Home</a></li>
      <li><a href="https://www.kmahyyg.xyz/express-page/" class="hamburger-menu-overlay-link">Express Inc</a></li>
      <li><a href="https://www.kmahyyg.xyz/about-me-page/" class="hamburger-menu-overlay-link">About</a></li>
      <li><a href="https://www.kmahyyg.xyz/archlinux-bug-page/" class="hamburger-menu-overlay-link">Arch Linux</a></li>
      <li><a href="https://www.kmahyyg.xyz/donate-page/" class="hamburger-menu-overlay-link">Donate</a></li>
      <li><a href="https://www.kmahyyg.xyz/categories/code" class="hamburger-menu-overlay-link">Code</a></li><li><a href="https://www.kmahyyg.xyz/categories/life" class="hamburger-menu-overlay-link">Life</a></li><li><a href="https://www.kmahyyg.xyz/categories/network" class="hamburger-menu-overlay-link">Network</a></li><li><a href="https://www.kmahyyg.xyz/categories/school" class="hamburger-menu-overlay-link">School</a></li><li><a href="https://www.kmahyyg.xyz/categories/tech" class="hamburger-menu-overlay-link">Tech</a></li>
    </ul>
  </div>
</nav>
    <main class="content side-text-padding">
      <article class="post ">
        <header class="post-header">
        	<h1 class="post-title">爬取课表并转换为 ICS 文件</h1>
          <p class="post-date">Posted <time datetime="2018-08-10">Aug 10, 2018</time></p>
        </header>
        
        <picture class="post-figure">
            
            <source srcset="https://alicdn.kmahyyg.xyz/asset_files/aether/cat_code.webp">
          <img src="https://alicdn.kmahyyg.xyz/asset_files/aether/cat_code.webp" >
        </picture>
        
        

<h1 id="windows-用户请直接看这里">Windows 用户请直接看这里</h1>

<p>请您直接根据您所在的学校前往下列页面下载预编译好的 exe 文件，然后跳转到接下来的 <code>教程 Part 3</code> 部分，继续您的操作。</p>

<p>云南大学：<a href="https://github.com/kmahyyg/YNU2GCalendar/releases">https://github.com/kmahyyg/YNU2GCalendar/releases</a></p>

<p>上海大学：<a href="https://github.com/kmahyyg/shu2ics/releases">https://github.com/kmahyyg/shu2ics/releases</a></p>

<h1 id="其他用户建议编译安装">其他用户建议编译安装</h1>

<hr />

<h2 id="以下为编译安装步骤">以下为编译安装步骤。</h2>

<h1 id="注意">注意</h1>

<p>如果您发现运行过程中出现错误，请在对应项目页面重新下载代码并重新安装 <strong>项目依赖</strong> ，若仍然无法使用，请您提交 Issue, 我会检查并向您及时反馈。</p>

<h1 id="教程">教程</h1>

<p>本文的主要目的是向使用以下项目的用户提供使用教程：</p>

<ul>
<li><p><a href="https://github.com/kmahyyg/ynu2gcalendar">YNU2Gcalendar</a></p></li>

<li><p><a href="https://github.com/kmahyyg/shu2ics">SHU2ICS</a></p></li>
</ul>

<p>请您根据您使用的项目点击目录侧对应的标题查看具体教程。</p>

<p>本次演示基于 Arch Linux, Mac OS应当可以正常使用。</p>

<p><del> 不保证 Windows 系统不会出现兼容性问题（咕咕咕），但是应该能正常运行。 </del></p>

<h2 id="系统环境依赖">系统环境依赖</h2>

<p>Linux 用户请直接安装 <code>python3</code> 和 <code>python-pip</code> 包。</p>

<p>Windows 用户请安装 Python 并勾选 <code>Add to Path</code> 和 <code>Install PIP</code> 选项。</p>

<p>Mac OS 用户请直接使用此教程安装 <a href="https://pythonguidecn.readthedocs.io/zh/latest/starting/install3/osx.html">https://pythonguidecn.readthedocs.io/zh/latest/starting/install3/osx.html</a></p>

<p>下载 适用于 Windows 的 Python： <a href="https://www.python.org/downloads/release/python-370/">https://www.python.org/downloads/release/python-370/</a></p>

<p>安装完成后，请您打开终端输入 <code>python3 --version &amp;&amp; pip3 --version</code> 查看是否正确安装完成。</p>

<p>正确回显：</p>

<p><img src="https://alicdn.kmahyyg.xyz/asset_files/shu2ics_pyv.webp" alt="pyversion" /></p>

<h2 id="教程-part-1-下载代码并安装所需的项目依赖">教程 Part 1： 下载代码并安装所需的项目依赖</h2>

<p>请您打开您的项目对应的网址：</p>

<p>上海大学用户请点击 <a href="https://github.com/kmahyyg/shu2ics">这里</a></p>

<p>云南大学用户请点击 <a href="https://github.com/kmahyyg/ynu2gcalendar">这里</a></p>

<p>点击页面的 &ldquo;Clone or Download&rdquo; 按钮，然后选择 “Download zip”</p>

<p><img src="https://alicdn.kmahyyg.xyz/asset_files/2ics_dcode.webp" alt="drepo" /></p>

<p>将下载好的代码解压后，打开解压得到的文件夹，并在文件夹中打开终端，输入：</p>

<table>
<thead>
<tr>
<th align="center">平台</th>
<th align="center">代码</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">Windows</td>
<td align="center">python -m pip install -r requirements.txt</td>
</tr>

<tr>
<td align="center">Linux</td>
<td align="center">sudo pip3 install -r requirements.txt</td>
</tr>

<tr>
<td align="center">Mac OS</td>
<td align="center">sudo pip3 install -r requirements.txt</td>
</tr>
</tbody>
</table>

<p>安装依赖并耐心等待安装完成。</p>

<h2 id="教程-part-2-创建日历文件">教程 Part 2： 创建日历文件</h2>

<p>如果出现任何报错，请您检查以上的环境安装是否正常完成。</p>

<h3 id="shu2ics">SHU2ICS</h3>

<p>第一步：打开终端，执行 <code>python3 ./main.py</code></p>

<p>第二步：按照界面提示，根据格式输入一个学期开始的时间。接下来选择学期数，并输入您的教务系统帐号和密码。 <strong>输入密码时不会有任何回显，您无需担心，请直接往下输入，输入完成按下回车键即可！</strong></p>

<p><img src="https://alicdn.kmahyyg.xyz/asset_files/shu2ics_op.webp" alt="login" /></p>

<p>第三步： 见到 <code>Validate Image</code> 开头的提示后，软件会自动弹出验证码，请您将验证码输入到对应位置。 <strong>验证码不区分大小写</strong></p>

<p><img src="https://alicdn.kmahyyg.xyz/asset_files/shu2ics_capt1.webp" alt="captcha notice" /></p>

<p><img src="https://alicdn.kmahyyg.xyz/asset_files/shu2ics_capt2.webp" alt="captcha img" /></p>

<p>第四步： 请您耐心等待，直到导出完成，这时候，在您的当前工作文件夹内会产生一个大小不为 0 的文件 <code>Course Schedule.ics</code> 文件。导出成功！</p>

<p><img src="https://alicdn.kmahyyg.xyz/asset_files/shu2ics_suc.webp" alt="ics file" /></p>

<h3 id="ynu2gcalendar">YNU2Gcalendar</h3>

<p>第一步： 复制 <code>apikey.py.example</code> 并改名为 <code>apikey.py</code></p>

<p>第二步： 打开 <code>apikey.py</code> ，修改</p>

<table>
<thead>
<tr>
<th align="center">需要修改的地方</th>
<th align="center">在等号后面的<strong>引号内</strong>填入</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">ynu_ehall_name</td>
<td align="center">您的学号</td>
</tr>

<tr>
<td align="center">ynu_ehall_password</td>
<td align="center">您的教务系统密码</td>
</tr>

<tr>
<td align="center">mailacc</td>
<td align="center">MAILTO:您的邮箱</td>
</tr>
</tbody>
</table>

<p>并保存，关闭文本编辑器。</p>

<p><img src="https://alicdn.kmahyyg.xyz/asset_files/ynu2ics_modify.webp" alt="modify user login crediential" /></p>

<p><strong>如果您的统一身份认证开启了两次确认验证或者单点登陆，本程序已经预置了处理代码，但不保证有效，请您暂时关闭。</strong></p>

<p><strong>如果您多次使用错误密码登陆触发了验证码，也请您根据界面提示输入验证码。 Linux 用户安装 Tesseract 库后可以选择使用自动识别验证码功能，其他系统用户无解，自动识别验证码功能的准确度大约在 85% 左右，如果自动识别不准确，还烦请您根据提示手动输入验证码。</strong></p>

<p>第三步：运行 <code>python3 ./client.py</code> 启动程序，按照提示接受免责声明并确认您已完成前面几步，接下来按任意键继续。程序模拟登陆完成后，请您输入当前学期共几周，一般为 18 ~ 20 周。只能输入整数！</p>

<p><img src="https://alicdn.kmahyyg.xyz/asset_files/ynu2ics_op.webp" alt="run photo" /></p>

<p>第四步：运行完成，当前文件夹内会产生一个大小不为 0 的文件 <code>ynucal.ics</code>，导出成功！</p>

<p><img src="https://alicdn.kmahyyg.xyz/asset_files/ynu2ics_suc1.webp" alt="success" /></p>

<p><img src="https://alicdn.kmahyyg.xyz/asset_files/ynu2ics_suc2.webp" alt="success2" /></p>

<h2 id="教程-part-3-使用日历文件">教程 Part 3： 使用日历文件</h2>

<p>您可以将导出的 ics 结尾的文件导出到几乎所有移动设备，并在移动设备打开，即可添加到您的手机系统自带日历！</p>

<p>上海大学用户默认课前 25 分钟提醒上课，云南大学用户默认课前 30 分钟提醒上课。</p>

<p>如果您使用 Mac，可以直接打开 ics 文件，您将会在您的日历应用中看到这个课表。</p>

<h2 id="致谢">致谢</h2>

<ol>
<li><a href="https://github.com/JeromeTan1997">JeromeTan1997</a></li>
<li>我的好基友 - Cindy  （滑稽</li>
</ol>

<h2 id="运行出现问题">运行出现问题</h2>

<ol>
<li>请您检查上述步骤是否完整成功完成。</li>
<li>欢迎您在对应项目页面点击 Issue,创建一个新的 Issue 向我反馈。</li>
</ol>

<h2 id="开源协议">开源协议</h2>

<p>我的所有代码均在 GNU Affero Public License V3.0 之下授权。</p>

      </article>
      <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "kmahyyg" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </main>
    <nav class="end-nav side-padding">
      
      <a ontouchstart="cardPressed.call(this)" ontouchend="cardReleased.call(this)" ontouchmove="cardReleased.call(this)" 
  href="https://www.kmahyyg.xyz/" class="card home-card" style="background-image: url( https://alicdn.kmahyyg.xyz/asset_files/aether/backtohome.webp )" rel="bookmark" >
  Home
</a>
    </nav>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>
<script src="https://www.kmahyyg.xyz/js/core.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>
  </body>
</html>